//! moment-holiday.js
//! version : 1.5.1
//! author : Kodie Grantham
//! license : MIT
//! https://github.com/kodie/moment-holiday
(function(){var t=require("moment"),e=[],r=function(r,n,a){for(var i,o=[],s=0;s<e.length;s++){var h=e[s](r,n);(h||!1===h)&&(i=h)}if(!1===i)return!1;if("string"==typeof i?n=i:i&&(o=i),!t.isMoment(o)&&!o.length&&n.charAt(0).match(/[0-9(]/)){var l=!1,d=n.split("|");d.length>1&&(l=!0),d.length>2&&(d=[d[0],d[1]]);for(s=0;s<d.length;s++){var c=t(r),y=d[s].split("/");if(1===y.length||2===y.length&&"("!==y[1].charAt(0)&&4===y[1].length){var u=d[s];s=-1,d=[];for(var v=1;v<13;v++)d.push(v+"/"+u)}else if(y.length>2&&c.year(parseInt(y[2])),c.month(parseInt(y[0])-1),"("===y[1].charAt(0)){var g=y[1].slice(1,-1).split(","),p=parseInt(g[0]),O=parseInt(g[1]),b=t(c).startOf("month"),k=t(c).endOf("month").diff(b,"days")+1,w=[];if(g[1]&&"["===g[1].charAt(0)){var m=!0;(O=parseInt(g[1].slice(1,-1)))<0&&(m=!1,O=parseInt(g[1].slice(2,-1))),b=t(c).date(O);for(var j=0;j<7;j++){if(b.day()===p){o.push(t(b));break}m?b.add(1,"day"):b.subtract(1,"day")}continue}for(var _=0;_<k;_++)b.day()===p&&w.push(t(b)),b.add(1,"day");if(!O){o=o.concat(w);continue}c=O<0?w[w.length+O]:w[O-1],o.push(c)}else o.push(c.date(y[1]))}if(l&&o.length>1){var x=o[1].diff(o[0],"days");if(x>1){var P=t(o[0]);o=[o[0]];for(s=0;s<x;s++)P.add(1,"day"),o.push(t(P))}}}o=f(o);for(s=0;s<o.length;s++)t.isMoment(o[s])?(a&&(0===o[s].day()&&(o[s]=o[s].add(1,"day")),6===o[s].day()&&(o[s]=o[s].subtract(1,"day"))),o[s]=o[s].startOf("day")):delete o[s];return!!o.length&&(1===o.length?o[0]:o)},n=function(t,e){var r=[];e=f(e);for(var n=0;n<e.length;n++){var a=t.match(new RegExp(e[n],"gi"));a&&(r=r.concat(a))}return r},a=function(e,a,i,o,s){var l={},f=[],c={};if(h=s||t.holidays.active,h.hasOwnProperty(a))f.push(a);else if(fk=d(a,h))f.push(fk);else{for(var y in h)if(h.hasOwnProperty(y)){if(l[y]=n(a,y.split(/[\s,.-]+/).filter(function(t){return t.length>2})).length,h[y].keywords_n){if(n(a,h[y].keywords_n).length){l[y]=0;continue}}if(h[y].keywords_y){var u=n(a,h[y].keywords_y);if(!u||u.length!==h[y].keywords_y.length){l[y]=0;continue}l[y]+=u.length}if(h[y].keywords){var v=n(a,h[y].keywords);if(!v)continue;l[y]+=v.length}}for(var g in l)l[g]&&l.hasOwnProperty(g)&&(f.length&&l[g]!==l[f[0]]?l[g]>l[f[0]]&&(f=[g]):f.push(g))}if(!f.length)return!1;if(!1===o)return f;for(var p=0;p<f.length;p++){var O=r(e,h[f[p]].date,i);O&&(c[f[p]]=O)}return!!Object.keys(c).length&&c},i=function(e,r,n,i,o){var s=[];i&&(s={}),r=f(r),o||(o=t.holidays.active);for(var h=0;h<r.length;h++){var l=a(e,r[h],n,i,o);l&&(s=i?c(s,l):s.concat(l))}return s},o=function(e,n){var a=t.holidays.active,i={};for(var o in a)a.hasOwnProperty(o)&&(td=r(e,a[o].date,n))&&(i[o]=td);return i},s=function(e){if(regions=e.split("/"),e=regions[0].toLowerCase().replace(" ","_"),regions.shift(),!t.holidays[e])try{var r="./locale/";"build"==__dirname.split("/").slice(-1).pop()&&(r="."+r),require(r+e)}catch(t){}return!!t.holidays[e]&&(regions.length?function(e,r){var n=t.holidays[e],a={};if(n)for(var i=0;i<r.length;i++){var o=r[i].toLowerCase(),s=t.holidays[e+"/"+o];s={};for(var h in n)if(n.hasOwnProperty(h)){var l=n[h].regions||[],f=n[h].regions_n||[];l.length&&l.join().toLowerCase().split(),f.length&&f.join().toLowerCase().split(),(!l.length&&!f.length||l.length&&~l.indexOf(o)||f.length&&!~f.indexOf(o))&&(s[h]=n[h])}s&&(a=c(a,s))}return!!Object.keys(a).length&&a}(e,regions):t.holidays[e])},l=function(e,r,n,a){r||(r=1);for(var i=o(e,a),s=t(e),h=e.year(),l=[],d=0;d<r;d++)for(var c=t(s);;){var y=!1;if(n?c.add(1,"day"):c.subtract(1,"day"),c.year()!==h&&(i=o(c,a),h=c.year()),!Object.keys(i).length){y=!0;break}for(var u in i)if(i.hasOwnProperty(u)){for(var v=!1,g=f(i[u]),p=0;p<g.length;p++)if(c.isSame(g[p],"day")){l.push(g[p]),s=t(c),v=!0;break}if(v){y=!0;break}}if(y)break}return!!l.length&&(1===l.length?l[0]:l)},f=function(t){return t&&t.constructor!==Array?[t]:t},d=function(t,e){e.constructor===Object&&(e=Object.keys(e));for(var r=0;r<e.length;r++)if(t.toLowerCase()===e[r].toLowerCase())return e[r];return!1},c=function(t,e){return Object.assign({},t,e)};t.fn.holiday=function(e,r){t.holidays.active;var n={},i=!1;if(e){e.constructor!==Array&&(i=!0,e=[e]);for(var s=0;s<e.length;s++)(td=a(this,e[s],r))&&(n=Object.assign({},n,td))}else n=o(this,r);var h=Object.keys(n);return!!h.length&&(1===h.length&&i?n[h[0]]:n)},t.fn.holidays=function(t,e){return this.holiday(t,e)},t.fn.isHoliday=function(t,e){var r,n,a=[];if(t?(t=f(t),r=this.holiday(t,e),n=!1):(r=o(this,e),n=!0),!r)return!1;for(var i in r)if(r.hasOwnProperty(i))for(var s=f(r[i]),h=0;h<s.length;h++)if(this.isSame(s[h],"day")){if(!n)return!0;a.push(i)}return!!a.length&&(1===a.length?a[0]:a)},t.fn.previousHoliday=function(t,e){return l(this,t,!1,e)},t.fn.previousHolidays=function(t,e){return this.previousHoliday(t,e)},t.fn.nextHoliday=function(t,e){return l(this,t,!0,e)},t.fn.nextHolidays=function(t,e){return this.nextHoliday(t,e)},t.fn.holidaysBetween=function(e,r){e||(e=new Date),e=t(e).subtract(1,"day");for(var n=o(this,r),a=t(this),i=a.year(),s=[],h=0;h<e.diff(this,"days")&&(a.add(1,"day"),a.year()!==i&&(n=o(a,r),i=a.year()),Object.keys(n).length);h++)for(var l in n){for(var d=!1,c=f(n[l]),y=0;y<c.length;y++)if(a.isSame(c[y],"day")){s.push(c[y]),d=!0;break}if(d)break}return!!s.length&&s},t.holidays={active:{},active_last:{}},t.modifyHolidays={set:function(e,r){var n={};if(e.constructor===Array){for(var o=[],h=0;h<e.length;h++){var l=a(this,e[h],null,!1);l&&(o=o.concat(l))}if(o.length){n=c(t.holidays.active);for(var f in n)n.hasOwnProperty(f)&&(~o.indexOf(f)||delete n[f])}}else if("string"==typeof e){var d=s(e);if(d)if(r)for(var y=i(this,r,!1,!1,d),h=0;h<y.length;h++)n[y[h]]=c(d[y[h]]);else n=c(d)}else n=e;return!Object.keys(n).length&&e!==n||Object.is(t.holidays.active,n)||(t.holidays.active_last=c(t.holidays.active),t.holidays.active=n),this},add:function(e,r){if("string"==typeof e){var n=s(e);if(e={},n)if(r)for(var a=i(this,r,!1,!1,n),o=0;o<a.length;o++)e[a[o]]=c(n[a[o]]);else e=n}return Object.keys(e).length&&(t.holidays.active_last=c(t.holidays.active),t.holidays.active=c(t.holidays.active,e)),this},remove:function(e){e=f(e);var r=i(this,e,!1,!1),n=c(t.holidays.active);if(r)for(var a=0;a<r.length;a++)delete n[r[a]];return Object.is(t.holidays.active,n)||(t.holidays.active_last=c(t.holidays.active),t.holidays.active=n),this},undo:function(){var e=c(t.holidays.active);return t.holidays.active=c(t.holidays.active_last),t.holidays.active_last=e,this},load:function(t){t=f(t);for(var e=0;e<t.length;e++)s(t[e]);return this},extendParser:function(t){return e.push(t),this}},null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(module.exports=t)}).call(this);
//# sourceMappingURL=moment-holiday.min.js.map
